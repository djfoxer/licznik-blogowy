function AwesomeChart(e){var t=typeof e==="string"?document.getElementById(e):e;this.ctx=t.getContext("2d");this.width=this.ctx.canvas.width;this.height=this.ctx.canvas.height;this.numberOfDecimals=0;this.proportionalSizes=true;this.widthSizeFactor=this.width/400;this.heightSizeFactor=this.height/400;this.chartType="bar";this.randomColors=false;this.animate=false;this.animationFrames=60;this.marginTop=10;this.marginBottom=10;this.marginLeft=10;this.marginRight=10;this.labelMargin=10;this.dataValueMargin=20;this.titleMargin=10;this.yAxisLabelMargin=5;this.data=new Array;this.labels=new Array;this.colors=new Array;this.title=null;this.backgroundFillStyle="rgba(255,255,255,0)";this.borderStrokeStyle="rgba(255,255,255,0)";this.borderWidth=1;this.labelFillStyle="rgb(220, 36, 0)";this.labelFont="sans-serif";this.labelFontHeight=12;this.labelFontStyle="";this.dataValueFillStyle="#333";this.dataValueFont="sans-serif";this.dataValueFontHeight=15;this.dataValueFontStyle="";this.titleFillStyle="#333";this.titleFont="sans-serif";this.titleFontHeight=16;this.titleFontStyle="bold";this.yAxisLabelFillStyle="#333";this.yAxisLabelFont="sans-serif";this.yAxisLabelFontHeight=10;this.yAxisLabelFontStyle="";var n=this.ctx.createLinearGradient(0,0,0,this.height);n.addColorStop(.2,"#fdfdfd");n.addColorStop(.8,"#ededed");this.chartBackgroundFillStyle=n;this.chartBorderStrokeStyle="#999";this.chartBorderLineWidth=1;this.chartHorizontalLineStrokeStyle="#999";this.chartHorizontalLineWidth=1;this.chartVerticalLineStrokeStyle="#999";this.chartVerticalLineWidth=1;this.chartMarkerSize=5;this.chartPointRadius=4;this.chartPointFillStyle="rgb(150, 36, 0)";this.chartLineStrokeStyle="rgba(150, 36, 0, 0.5)";this.chartLineWidth=2;this.barFillStyle="rgb(220, 36, 0)";this.barStrokeStyle="#fff";this.barBorderWidth=2;this.barShadowColor="rgba(0, 0, 0, 0.5)";this.barShadowBlur=5;this.barShadowOffsetX=3;this.barShadowOffsetY=0;this.barHGap=20;this.barVGap=20;this.explosionOffset=20;this.pieFillStyle="rgb(220, 36, 0)";this.pieStrokeStyle="#fff";this.pieBorderWidth=2;this.pieShadowColor="rgba(0, 0, 0, 0.5)";this.pieShadowBlur=5;this.pieShadowOffsetX=3;this.pieShadowOffsetY=0;this.pieStart=0;this.pieTotal=null;this.generateRandomColor=function(){var e=new Array;for(var t=0;t<3;t++){e.push(Math.ceil(Math.random()*150+50))}return"rgb("+e.join(",")+")"};this.setChartDataFromJSON=function(e){for(var t in e){this.labels.push(t);this.data.push(e[t])}};this.draw=function(){var e=this.ctx;e.lineCap="round";var t=Math.min(this.widthSizeFactor,this.heightSizeFactor);if(this.proportionalSizes){this.labelMargin=this.labelMargin*this.heightSizeFactor;this.dataValueMargin=this.dataValueMargin*this.heightSizeFactor;this.titleMargin=this.titleMargin*this.heightSizeFactor;this.yAxisLabelMargin=this.yAxisLabelMargin*this.heightSizeFactor;this.labelFontHeight=this.labelFontHeight*t;this.dataValueFontHeight=this.dataValueFontHeight*t;this.titleFontHeight=this.titleFontHeight*t;this.yAxisLabelFontHeight=this.yAxisLabelFontHeight*t;this.barHGap=this.barHGap*this.widthSizeFactor;this.barVGap=this.barHGap*this.heightSizeFactor;this.explosionOffset=this.explosionOffset*t}if(this.randomColors){for(var n=0;n<this.data.length;n++){if(!this.colors[n]){this.colors[n]=this.generateRandomColor()}}}if(this.chartType=="pie"){if(this.animate){this.animatePieChart("pie")}else{this.drawPieChart(false)}}else if(this.chartType=="ring"||this.chartType=="doughnut"){if(this.animate){this.animatePieChart("ring")}else{this.drawPieChart(true)}}else if(this.chartType=="exploded pie"){if(this.animate){this.animatePieChart("exploded")}else{this.drawExplodedPieChart()}}else if(this.chartType=="horizontal bars"){if(this.animate){this.animateVerticalBarChart()}else{this.drawVerticalBarChart()}}else if(this.chartType=="pareto"){this.drawParetoChart()}else{if(this.animate){this.animateBarChart()}else{this.drawBarChart()}}this.drawTitleAndBorders()};this.drawTitleAndBorders=function(){var e=this.ctx;if(this.title!=null){e.font=this.titleFontStyle+" "+this.titleFontHeight+"px "+this.titleFont;e.fillStyle=this.titleFillStyle;e.textAlign="center";e.textBaseline="bottom";e.fillText(this.title,this.width/2,this.marginTop+this.titleFontHeight,this.width-10)}e.lineWidth=this.borderWidth;e.strokeStyle=this.borderStrokeStyle;e.strokeRect(0,0,this.width,this.height);e.globalCompositeOperation="destination-over";e.fillStyle=this.backgroundFillStyle;e.fillRect(0,0,this.width,this.height);e.globalCompositeOperation="source-over"};this.drawBarChart=function(){var e=this.ctx;var t=this.data.length;var n=this.data.max();var r=this.data.min();var i=(this.width-this.marginLeft-this.marginRight-(t-1)*this.barHGap)/t;var s=this.marginTop+this.labelMargin+this.labelFontHeight+this.dataValueMargin+this.dataValueFontHeight;var o=this.height-this.marginBottom;if(this.title!=null){s+=this.titleFontHeight+this.titleMargin}var u=this.height-this.marginBottom;if(r<0){o=this.height-this.marginBottom-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight;u=o+(this.height-this.marginBottom-s-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight)*r/(Math.abs(r)+n)}var a=Math.max(Math.abs(u-s),Math.abs(u-o));var f=Math.max(Math.abs(r),Math.abs(n));var l=this.marginLeft;var c=u;var h=0;var p=0;for(var d=0;d<this.data.length;d++){p=this.data[d];h=p*a/f;if(this.colors[d]){e.fillStyle=this.colors[d]}else{e.fillStyle=this.barFillStyle}e.strokeStyle=this.barStrokeStyle;e.lineWidth=this.barBorderWidth;e.beginPath();e.moveTo(l,c);e.lineTo(l,c-h);e.lineTo(l+i,c-h);e.lineTo(l+i,c);e.save();e.shadowOffsetX=this.barShadowOffsetX;e.shadowOffsetY=this.barShadowOffsetY;e.shadowBlur=this.barShadowBlur;e.shadowColor=this.barShadowColor;e.fill();e.restore();e.stroke();e.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont;if(this.colors[d]){e.fillStyle=this.colors[d]}else{e.fillStyle=this.labelFillStyle}e.textAlign="center";if(this.labels[d]){if(p>=0){e.textBaseline="bottom";e.fillText(this.labels[d],l+i/2,u-h-this.labelMargin,i)}else{e.textBaseline="top";e.fillText(this.labels[d],l+i/2,u-h+this.labelMargin,i)}}e.font=this.dataValueFontStyle+" "+this.dataValueFontHeight+"px "+this.dataValueFont;e.fillStyle=this.dataValueFillStyle;e.textAlign="center";if(p>=0){e.textBaseline="bottom";e.fillText(p,l+i/2,u-h-this.labelMargin-this.dataValueMargin,i)}else{e.textBaseline="top";e.fillText(p,l+i/2,u-h+this.labelMargin+this.dataValueMargin,i)}l=l+i+this.barHGap}};this.animateBarChart=function(){var e=this,t=this.animationFrames,n=0,r=this.data.max(),i=this.data.min(),s=this.marginTop+this.labelMargin+this.labelFontHeight+this.dataValueMargin+this.dataValueFontHeight,o=barBottomY=this.height-this.marginBottom;if(this.title!=null){s+=this.titleFontHeight+this.titleMargin}if(i<0){o=this.height-this.marginBottom-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight;barBottomY=o+(this.height-this.marginBottom-s-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight)*i/(Math.abs(i)+r)}var u=o-s,a=0,f=0;var l=0;if(i<0){var c=Math.max(Math.abs(barBottomY-s),Math.abs(barBottomY-o)),h=Math.max(Math.abs(i),Math.abs(r));l=Math.abs(i*c/h+this.labelMargin+this.labelFontHeight)}this.marginBottom+=l;if(this.title!=null){this.titleMargin+=u-l}else{this.marginTop+=u-l}a=l/t;f=(u-l)/t;var p=function(){if(n++<t){e.marginBottom-=a;if(e.title!=null){e.titleMargin-=f}else{e.marginTop-=f}e.ctx.clearRect(0,0,e.width,e.height);e.drawBarChart();e.drawTitleAndBorders();if(typeof window.requestAnimationFrame=="function"){window.requestAnimationFrame(p)}else if(typeof window.msRequestAnimationFrame=="function"){window.msRequestAnimationFrame(p)}else if(typeof window.webkitRequestAnimationFrame=="function"){window.webkitRequestAnimationFrame(p)}else if(window.mozRequestAnimationFrame){window.mozRequestAnimationFrame(p)}else{setTimeout(p,16.6666666)}}};p()};this.drawVerticalBarChart=function(){var e=this.ctx;e.save();e.translate(this.width/2,this.height/2);e.rotate(Math.PI/2);e.translate(-this.width/2,-this.height/2);var t=this.data.length;var n=this.data.max();var r=this.data.min();var i=this.marginLeft;if(this.title!=null){i+=this.titleFontHeight+this.titleMargin}var s=(this.width-i-this.marginRight-(t-1)*this.barHGap)/t;e.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont;var o=0;var u=0;for(var a=0;a<this.labels.length;a++){u=e.measureText(this.labels[a]).width;if(u>o){o=u}}e.font=this.dataValueFontStyle+" "+this.dataValueFontHeight+"px "+this.dataValueFont;var f=0;var l=0;for(var a=0;a<this.data.length;a++){l=e.measureText(this.data[a]).width;if(l>f){f=l}}var c=this.marginTop+Math.max(this.labelMargin+o,this.dataValueMargin+f);var h=this.height-this.marginBottom;var p=this.height-this.marginBottom;if(r<0){h=this.height-this.marginBottom-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight;p=h+(this.height-this.marginBottom-c-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight)*r/(Math.abs(r)+n)}var d=Math.max(Math.abs(p-c),Math.abs(p-h));var v=Math.max(Math.abs(r),Math.abs(n));var m=i;var g=p;var y=0;var b=0;for(var a=0;a<this.data.length;a++){b=this.data[a];y=b*d/v;if(this.colors[a]){e.fillStyle=this.colors[a]}else{e.fillStyle=this.barFillStyle}e.strokeStyle=this.barStrokeStyle;e.lineWidth=this.barBorderWidth;e.beginPath();e.moveTo(m,g);e.lineTo(m,g-y);e.lineTo(m+s,g-y);e.lineTo(m+s,g);e.save();e.shadowOffsetX=this.barShadowOffsetX;e.shadowOffsetY=this.barShadowOffsetY;e.shadowBlur=this.barShadowBlur;e.shadowColor=this.barShadowColor;e.fill();e.restore();e.stroke();e.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont;if(this.colors[a]){e.fillStyle=this.colors[a]}else{e.fillStyle=this.labelFillStyle}e.save();e.translate(m+s/2,p-y);e.rotate(-Math.PI/2);e.textBaseline="top";if(this.labels[a]){if(b>=0){e.textAlign="left";e.fillText(this.labels[a],this.labelMargin,0)}else{e.textAlign="right";e.fillText(this.labels[a],-this.labelMargin,0)}}e.font=this.dataValueFontStyle+" "+this.dataValueFontHeight+"px "+this.dataValueFont;e.fillStyle=this.dataValueFillStyle;e.textBaseline="bottom";if(b>=0){e.textAlign="left";e.fillText(b,this.labelMargin,0)}else{e.textAlign="right";e.fillText(b,-this.labelMargin,0)}e.restore();m=m+s+this.barHGap}e.restore()};this.animateVerticalBarChart=function(){var e=this,t=this.animationFrames,n=0,r=this.data.max(),i=this.data.min(),s=this.data.length,o=this.ctx,u=this.marginLeft;marginTop=this.marginTop;marginTopCurrent=0;if(this.title!=null){u+=this.titleFontHeight+this.titleMargin}var a=(this.width-u-this.marginRight-(s-1)*this.barHGap)/s;o.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont;var f=0;var l=0;for(var c=0;c<this.labels.length;c++){l=o.measureText(this.labels[c]).width;if(l>f){f=l}}o.font=this.dataValueFontStyle+" "+this.dataValueFontHeight+"px "+this.dataValueFont;var h=0;var p=0;for(var c=0;c<s;c++){p=o.measureText(this.data[c]).width;if(p>h){h=p}}var d=this.marginTop+Math.max(this.labelMargin+f,this.dataValueMargin+h);var v=this.height-this.marginBottom;var m=this.height-this.marginBottom;if(i<0){v=this.height-this.marginBottom-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight;m=v+(this.height-this.marginBottom-d-this.labelMargin-this.labelFontHeight-this.dataValueMargin-this.dataValueFontHeight)*i/(Math.abs(i)+r)}var g=Math.max(Math.abs(m-d),Math.abs(m-v));var y=Math.max(Math.abs(i),Math.abs(r));var b=0;if(i<0){b=Math.abs(i*g/y)}var w=r*g/y+b,E=0,S=0;this.marginBottom+=b;this.marginTop+=w-b;E=b/t;S=(w-b)/t;var x=function(){if(n++<t){e.marginBottom-=E;e.marginTop-=S;e.ctx.clearRect(0,0,e.width,e.height);e.drawVerticalBarChart();marginTopCurrent=e.marginTop;e.marginTop=marginTop;e.drawTitleAndBorders();e.marginTop=marginTopCurrent;if(typeof window.requestAnimationFrame=="function"){window.requestAnimationFrame(x)}else if(typeof window.msRequestAnimationFrame=="function"){window.msRequestAnimationFrame(x)}else if(typeof window.webkitRequestAnimationFrame=="function"){window.webkitRequestAnimationFrame(x)}else if(window.mozRequestAnimationFrame){window.mozRequestAnimationFrame(x)}else{setTimeout(x,16.6666666)}}};x()};this.drawPieChart=function(e){var t=this.ctx;t.lineWidth=this.pieBorderWidth;var n=0,r=0,i=this.data.length;for(var s=0;s<i;s++){r+=this.data[s];if(this.data[s]<0){return}}if(this.pieTotal==null){n=r}else{n=this.pieTotal}var o=this.width-this.marginLeft-this.marginRight;var u=this.height-this.marginTop-this.marginBottom;if(this.title){u=u-this.titleFontHeight-this.titleMargin}var a=this.width/2;var f=this.marginTop+u/2;if(this.title){f+=this.titleFontHeight+this.titleMargin}var l=2*Math.PI;var c=Math.min(o,u)/2;t.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont;var h=0;var p=0;for(var s=0;s<this.labels.length;s++){p=t.measureText(this.labels[s]).width;if(p>h){h=p}}c=c-h-this.labelMargin;var d=this.pieStart*l/r;var v=d;var m=0;var g=0;for(var s=0;s<i;s++){t.beginPath();g=this.data[s]*l/n;m=v+g;t.moveTo(a,f);t.arc(a,f,c,v,m,false);t.lineTo(a,f);v=m;if(this.colors[s]){t.fillStyle=this.colors[s]}else{t.fillStyle=this.pieFillStyle}t.fill();t.strokeStyle=this.pieStrokeStyle;t.stroke()}t.save();t.shadowOffsetX=this.pieShadowOffsetX;t.shadowOffsetY=this.pieShadowOffsetY;t.translate(a,f);t.beginPath();t.moveTo(0,0);t.arc(0,0,c,d,m,false);t.shadowBlur=this.pieShadowBlur;t.shadowColor=this.pieShadowColor;t.globalCompositeOperation="destination-over";t.fillStyle="rgba(0,0,0,1.0)";t.fill();t.restore();if(e){var y=c/2;t.save();t.beginPath();t.moveTo(a+y,f);t.arc(a,f,y+this.pieBorderWidth,d,m,false);t.fillStyle=this.pieStrokeStyle;t.fill();t.restore();t.save();t.beginPath();t.moveTo(a+y,f);t.arc(a,f,y,0,l,false);t.globalCompositeOperation="destination-out";t.fillStyle="#000";t.fill();t.restore();t.save();t.shadowOffsetX=this.pieShadowOffsetX;t.shadowOffsetY=this.pieShadowOffsetY;t.translate(a,f);t.beginPath();t.arc(0,0,y,d,m,false);t.shadowBlur=this.pieShadowBlur;t.shadowColor=this.pieShadowColor;t.globalCompositeOperation="destination-over";t.strokeStyle=this.pieStrokeStyle;t.stroke();t.restore()}var v=this.pieStart*l/r;var m=0;var g=0;t.beginPath();for(var s=0;s<this.data.length;s++){t.save();g=this.data[s]*l/n;m=v+g;var b=v+g/2;t.translate(a,f);t.rotate(b);t.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont;if(this.colors[s]){t.fillStyle=this.colors[s]}else{t.fillStyle=this.labelFillStyle}t.textAlign="start";if(this.labels[s]){if(b>Math.PI/2&&b<=3*(Math.PI/2)){var w=c+this.labelMargin+t.measureText(this.labels[s]).width/2;t.translate(w,0);t.rotate(Math.PI);t.translate(-w,0)}t.textBaseline="middle";t.fillText(this.labels[s],c+this.labelMargin,0)}t.restore();v=m}};this.drawExplodedPieChart=function(){var e=this.ctx;e.lineWidth=this.pieBorderWidth;var t=0,n=0,r=this.data.length;for(var i=0;i<r;i++){n+=this.data[i];if(this.data[i]<0){return}}if(this.pieTotal==null){t=n}else{t=this.pieTotal}var s=this.width-this.marginLeft-this.marginRight;var o=this.height-this.marginTop-this.marginBottom;if(this.title!=null){o=o-this.titleFontHeight-this.titleMargin}var u=this.width/2;var a=this.marginTop+o/2;if(this.title){a+=this.titleFontHeight+this.titleMargin}var f=2*Math.PI;var l=Math.min(s,o)/2;e.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont;var c=0;var h=0;for(var i=0;i<this.labels.length;i++){h=e.measureText(this.labels[i]).width;if(h>c){c=h}}l=l-c-this.labelMargin;var p=this.pieStart*f/n;var d=0;var v=0;var m=0;var g=0;for(var i=0;i<this.data.length;i++){e.save();v=this.data[i]*f/t;d=p+v;m=v/2;g=p+m;e.translate(u,a);e.rotate(p);e.rotate(m);e.translate(this.explosionOffset,0);e.rotate(-m);e.beginPath();e.moveTo(0,0);e.arc(0,0,l,0,v,false);e.lineTo(0,0);e.save();e.shadowOffsetX=this.pieShadowOffsetX;e.shadowOffsetY=this.pieShadowOffsetY;e.shadowBlur=this.pieShadowBlur;e.shadowColor=this.pieShadowColor;if(this.colors[i]){e.fillStyle=this.colors[i]}else{e.fillStyle=this.pieFillStyle}e.fill();e.restore();e.strokeStyle=this.pieStrokeStyle;e.stroke();e.rotate(m);e.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont;if(this.colors[i]){e.fillStyle=this.colors[i]}else{e.fillStyle=this.labelFillStyle}e.textAlign="start";if(this.labels[i]){if(g>Math.PI/2&&g<=3*(Math.PI/2)){var y=l+this.labelMargin+e.measureText(this.labels[i]).width/2;e.translate(y,0);e.rotate(Math.PI);e.translate(-y,0)}e.textBaseline="middle";e.fillText(this.labels[i],l+this.labelMargin,0)}e.restore();p=d}};this.animatePieChart=function(e){var t=0,n=this.pieTotal,r=this,i=this.animationFrames,s=0,o=this.width-this.marginLeft-this.marginRight,u=this.height-this.marginTop-this.marginBottom,a=this.marginTop,f=this.marginLeft;if(this.title){u=u-this.titleFontHeight-this.titleMargin;a+=this.titleFontHeight+this.titleMargin}for(var l=0;l<this.data.length;l++){t+=this.data[l];if(this.data[l]<0){return}}if(n==null){n=t}var c=function(){if(s++<i){r.ctx.clearRect(0,0,r.width,r.height);r.pieTotal=t*(i/s)*(n/t);if(e=="pie"){r.drawPieChart(false)}else if(e=="ring"){r.drawPieChart(true)}else if(e=="exploded"){r.drawExplodedPieChart()}r.drawTitleAndBorders();if(typeof window.requestAnimationFrame=="function"){window.requestAnimationFrame(c)}else if(typeof window.msRequestAnimationFrame=="function"){window.msRequestAnimationFrame(c)}else if(typeof window.webkitRequestAnimationFrame=="function"){window.webkitRequestAnimationFrame(c)}else if(window.mozRequestAnimationFrame){window.mozRequestAnimationFrame(c)}else{setTimeout(c,16.6666666)}}};c()};this.drawParetoChart=function(){var e=this.ctx;var t=this.data.length;var n=new Array;for(var r=0;r<this.data.length;r++){n.push(r)}n.numericSortReverse(this.data);var i=this.data[n[0]];var s=this.data[n[n.length-1]];var o=0;for(var r=0;r<this.data.length;r++){o+=this.data[n[r]];if(this.data[n[r]]<0){return}}o=o.toFixed(this.numberOfDecimals);var u=new Array;u.push(0);for(var r=1;r<10;r++){u.push((o*r/10).toFixed(this.numberOfDecimals))}u.push(o);e.font=this.yAxisLabelFontStyle+" "+this.yAxisLabelFontHeight+"px "+this.yAxisLabelFont;var a=0;var f=0;for(var r=0;r<u.length;r++){f=e.measureText(u[r]).width;if(f>a){a=f}}var l=e.measureText("100%").width;var c=this.width-this.marginLeft-this.marginRight-2*this.chartMarkerSize-a-l-2*this.yAxisLabelMargin;var h=this.height-this.marginTop-this.marginBottom;var p=this.marginLeft+this.chartMarkerSize+a+this.yAxisLabelMargin;var d=this.marginTop;if(this.title){h-=this.titleFontHeight+this.titleMargin;d+=this.titleFontHeight+this.titleMargin}e.save();e.translate(p,d);e.fillStyle=this.chartBackgroundFillStyle;e.fillRect(0,0,c,h);var v=h/10;var m=0;e.lineWidth=this.chartHorizontalLineWidth;e.font=this.yAxisLabelFontStyle+" "+this.yAxisLabelFontHeight+"px "+this.yAxisLabelFont;for(var r=0;r<=10;r++){m=r*v;if(r>0&&r<10){e.strokeStyle=this.chartHorizontalLineStrokeStyle;e.beginPath();e.moveTo(0,m);e.lineTo(c,m);e.stroke()}e.strokeStyle=this.chartBorderStrokeStyle;e.beginPath();e.moveTo(-this.chartMarkerSize,m);e.lineTo(0,m);e.stroke();e.beginPath();e.moveTo(c,m);e.lineTo(c+this.chartMarkerSize,m);e.stroke();e.fillStyle=this.yAxisLabelFillStyle;e.textAlign="right";e.textBaseline="middle";e.fillText(u[10-r],-this.chartMarkerSize-this.yAxisLabelMargin,m);e.textAlign="left";e.fillText((10-r)*10+"%",c+this.chartMarkerSize+this.yAxisLabelMargin,m)}e.save();e.translate(0,h);var g=(c-2*this.barHGap)/t;var y=0;var b=g/2;var w=0;var E=this.barHGap;var S=E;var x=0;var T=0;var N=0;for(var r=0;r<this.data.length;r++){y=this.data[n[r]]*h/o;if(this.colors[r]){e.fillStyle=this.colors[r]}else{e.fillStyle=this.barFillStyle}e.strokeStyle=this.barStrokeStyle;e.lineWidth=this.barBorderWidth;e.beginPath();e.moveTo(E,w);e.lineTo(E,w-y);e.lineTo(E+g,w-y);e.lineTo(E+g,w);e.save();e.shadowOffsetX=this.barShadowOffsetX;e.shadowOffsetY=this.barShadowOffsetY;e.shadowBlur=this.barShadowBlur;e.shadowColor=this.barShadowColor;e.fill();e.restore();e.stroke();T=S;N=x;S=E+g;x-=y;if(r==this.data.length-1){x=-h}e.strokeStyle=this.chartLineStrokeStyle;e.lineWidth=this.chartLineWidth;e.beginPath();e.moveTo(S,x);e.lineTo(T,N);e.stroke();e.font=this.labelFontStyle+" "+this.labelFontHeight+"px "+this.labelFont;if(this.colors[r]){e.fillStyle=this.colors[r]}else{e.fillStyle=this.labelFillStyle}e.textAlign="center";if(this.labels[n[r]]){if(this.data[n[r]]>=0){e.textBaseline="bottom";e.fillText(this.labels[n[r]],E+b,-y-this.labelMargin,g)}else{e.textBaseline="top";e.fillText(this.labels[n[r]],E+b,-y+this.labelMargin,g)}}e.font=this.dataValueFontStyle+" "+this.dataValueFontHeight+"px "+this.dataValueFont;e.fillStyle=this.dataValueFillStyle;e.textAlign="center";if(this.data[n[r]]>=0){e.textBaseline="bottom";e.fillText(this.data[n[r]],E+b,-y-this.labelMargin-this.dataValueMargin,g)}else{e.textBaseline="top";e.fillText(this.data[n[r]],E+b,-y+this.labelMargin+this.dataValueMargin,g)}E=E+g}E=this.barHGap;S=E;x=0;T=0;N=0;e.fillStyle=this.chartPointFillStyle;e.beginPath();e.arc(S,x,this.chartPointRadius,0,2*Math.PI,false);e.fill();for(var r=0;r<this.data.length;r++){y=this.data[n[r]]*h/o;T=S;N=x;S=E+g;x-=y;if(r==this.data.length-1){x=-h}e.fillStyle=this.chartPointFillStyle;e.beginPath();e.arc(S,x,this.chartPointRadius,0,2*Math.PI,false);e.fill();E=E+g}e.restore();e.lineWidth=this.chartBorderLineWidth;e.strokeStyle=this.chartBorderStrokeStyle;e.strokeRect(0,0,c,h);e.restore()}}Array.prototype.numericSortReverse=function(e){this.sort(function(t,n){return e[n]-e[t]})};Array.prototype.max=function(){var e=this[0];var t=this.length;for(var n=1;n<t;n++){if(this[n]>e){e=this[n]}}return e};Array.prototype.min=function(){var e=this[0];var t=this.length;for(var n=1;n<t;n++){if(this[n]<e){e=this[n]}}return e}